# ğŸ”„ Natpudan Automated KB System - Visual Architecture & Data Flow

## System Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        NATPUDAN MEDICAL AI SYSTEM                            â•‘
â•‘                          (Port 8001 - Running Live)                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  Frontend (React)â”‚
                              â”‚  - Search UI    â”‚
                              â”‚  - Answer page  â”‚
                              â”‚  - â­ Rating    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                      â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Search Query   â”‚                    â”‚ Feedback Submission
            â”‚ /search        â”‚                    â”‚ /feedback/answer
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   FastAPI Backend (8001)    â”‚
                    â”‚  - Auth, Chat, Diagnosis   â”‚
                    â”‚  - KB Search & Automation  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”¬â–¼â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â–¼â”€â”€â”
    â”‚Search  â”‚             â”‚ KB  â”‚Org  â”‚            â”‚Feedback â”‚
    â”‚Router  â”‚             â”‚Auto â”‚    â”‚            â”‚Mgr      â”‚
    â”‚  /api/ â”‚             â”‚     â”‚    â”‚            â”‚ /api/   â”‚
    â”‚med/k/  â”‚             â”‚ /apiâ”‚kb- â”‚            â”‚kb-auto/ â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜             â””â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”˜            â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                        â”‚
        â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
        â”‚        â”‚           â”‚            â”‚          â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ Search Organizer   â”‚   â”‚    â”‚ Automated KB Manager    â”‚
    â”‚ (New Layer)        â”‚   â”‚    â”‚                         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ - Deduplicates     â”‚   â”‚    â”‚ - Freshness scoring     â”‚
    â”‚ - Normalizes       â”‚   â”‚    â”‚ - Quality gates         â”‚
    â”‚ - Groups by doc    â”‚   â”‚    â”‚ - Feedback tracking     â”‚
    â”‚ - Quality flags    â”‚   â”‚    â”‚ - Index integrity       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚ - PubMed sync           â”‚
             â”‚               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
             â”‚       â”‚   FAISS Index    â”‚ â”‚
             â”‚       â”‚   (20,623 docs)  â”‚ â”‚
             â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
             â”‚               â”‚            â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                     â”‚                â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Metadata Store â”‚  â”‚ Feedback Logs â”‚
            â”‚                â”‚  â”‚                â”‚
            â”‚ - document_id  â”‚  â”‚ /data/kb_fb/  â”‚
            â”‚ - filename     â”‚  â”‚ *.json         â”‚
            â”‚ - category     â”‚  â”‚                â”‚
            â”‚ - freshness    â”‚  â”‚ - answer_id   â”‚
            â”‚ - year         â”‚  â”‚ - rating      â”‚
            â”‚ - weight       â”‚  â”‚ - timestamp   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  APScheduler     â”‚
                        â”‚  (Background Job)â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚               â”‚               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1 AM UTC    â”‚  â”‚ 2 AM UTC      â”‚   â”‚ Manual Trigger â”‚
        â”‚             â”‚  â”‚               â”‚   â”‚                â”‚
        â”‚ Check Index â”‚  â”‚ Refresh +     â”‚   â”‚ Anytime via    â”‚
        â”‚ Integrity   â”‚  â”‚ PubMed Sync   â”‚   â”‚ API call       â”‚
        â”‚             â”‚  â”‚               â”‚   â”‚                â”‚
        â”‚ Validates:  â”‚  â”‚ Actions:      â”‚   â”‚ POST /api/kb-  â”‚
        â”‚ - FAISS âŸ·  â”‚  â”‚ - Fetch 5     â”‚   â”‚ automation/    â”‚
        â”‚   Metadata  â”‚  â”‚   topics from â”‚   â”‚ sync/pubmed-   â”‚
        â”‚   count     â”‚  â”‚   PubMed      â”‚   â”‚ manual         â”‚
        â”‚ - Doc IDs   â”‚  â”‚ - Filter docs â”‚   â”‚                â”‚
        â”‚ - Fix drift â”‚  â”‚   (quality)   â”‚   â”‚ POST /api/kb-  â”‚
        â”‚            â”‚  â”‚ - Tag date    â”‚   â”‚ automation/    â”‚
        â”‚ Auto-fix:  â”‚  â”‚   (freshness) â”‚   â”‚ sync/daily-    â”‚
        â”‚ - Rebuild  â”‚  â”‚ - Add to FAISSâ”‚   â”‚ refresh        â”‚
        â”‚   if neededâ”‚  â”‚ - Update DB   â”‚   â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  PubMed API     â”‚
                        â”‚ (10K req/day)   â”‚
                        â”‚ Free - No key   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: Search with Freshness Ranking

```
USER QUERY: "Type 2 Diabetes treatment 2024"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/medical/knowledge/search     â”‚
â”‚  + Authorization: Bearer token          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Search with Organizer   â”‚
    â”‚    Local KB search         â”‚
    â”‚    Get top 100 results     â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. Organizer Layer         â”‚
    â”‚    â”œâ”€ Dedup by doc_id      â”‚
    â”‚    â”œâ”€ Normalize metadata   â”‚
    â”‚    â””â”€ Group by document    â”‚
    â”‚    Output: 100 dedup items â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. Freshness Ranking       â”‚
    â”‚    For each result:        â”‚
    â”‚    score = base_score Ã—    â”‚
    â”‚    freshness Ã— weight      â”‚
    â”‚                            â”‚
    â”‚ Example:                   â”‚
    â”‚ - doc1: score=0.92, yr     â”‚
    â”‚   2024 â†’ f=0.95, w=1.1     â”‚
    â”‚   â†’ final = 0.92Ã—0.95Ã—1.1  â”‚
    â”‚   = 0.96                   â”‚
    â”‚                            â”‚
    â”‚ - doc2: score=0.88, yr     â”‚
    â”‚   2010 â†’ f=0.35, w=0.9     â”‚
    â”‚   â†’ final = 0.88Ã—0.35Ã—0.9  â”‚
    â”‚   = 0.28                   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. Sort by Final Score     â”‚
    â”‚    Top 5 ranked results:   â”‚
    â”‚    [doc1=0.96,             â”‚
    â”‚     doc3=0.85,             â”‚
    â”‚     doc5=0.78,             â”‚
    â”‚     doc2=0.28,  â† old      â”‚
    â”‚     doc4=0.15]  â† demoted  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. Return Results          â”‚
    â”‚    {                       â”‚
    â”‚      "results": [...],     â”‚
    â”‚      "document_groups":    â”‚
    â”‚        [{doc_id,           â”‚
    â”‚          top_chunk,        â”‚
    â”‚          chunks: 5,        â”‚
    â”‚          max_score}],      â”‚
    â”‚      "data_quality_flags"  â”‚
    â”‚    }                       â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 6. Optional: Synthesize    â”‚
    â”‚    Answer with LLM         â”‚
    â”‚    (GPT-4 or Llama)        â”‚
    â”‚    Using top 5 results +   â”‚
    â”‚    citations               â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RESPONSE TO USER           â”‚
    â”‚ {                          â”‚
    â”‚   query: "...",            â”‚
    â”‚   results: [5 docs],       â”‚
    â”‚   answer: "...",           â”‚
    â”‚   quality_flags: []        â”‚
    â”‚ }                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    USER SEES ANSWER + OPTION TO RATE
```

---

## Data Flow: Feedback Submission â†’ Ranking Improvement

```
USER RATES ANSWER: â­â­â­â­â­ (5 stars)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/kb-automation/feedback/answer   â”‚
â”‚ {                                         â”‚
â”‚   "answer_id": "ans_20241217_001",        â”‚
â”‚   "query": "Type 2 Diabetes treatment",   â”‚
â”‚   "document_ids": ["pubmed_123", "pub... â”‚
â”‚   "rating": 5,                           â”‚
â”‚   "comment": "Very helpful"              â”‚
â”‚ }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ AutomatedKBManager.                 â”‚
    â”‚ record_answer_feedback()            â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ For each document in feedback:      â”‚
    â”‚ Call _update_doc_weight()           â”‚
    â”‚                                     â”‚
    â”‚ Rating 5 â†’ boost = +0.1             â”‚
    â”‚ weight_new = 1.0 + 0.1 = 1.1        â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Save weight file:                   â”‚
    â”‚ /data/kb_feedback/                  â”‚
    â”‚ pubmed_123_weight.json              â”‚
    â”‚ {                                   â”‚
    â”‚   "doc_id": "pubmed_123",           â”‚
    â”‚   "weight": 1.1,                    â”‚
    â”‚   "feedback_count": 15,             â”‚
    â”‚   "last_feedback": "2024-12-17.." â”‚
    â”‚ }                                   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ NEXT SEARCH:                        â”‚
    â”‚ Same query from different user      â”‚
    â”‚                                     â”‚
    â”‚ When ranking, multiplier applied:   â”‚
    â”‚ final_score = base Ã— freshness Ã—    â”‚
    â”‚               weight â† now 1.1!    â”‚
    â”‚                                     â”‚
    â”‚ Result: pubmed_123 ranks higher     â”‚
    â”‚ due to previous positive feedback   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Daily Refresh Cycle (2 AM UTC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SCHEDULED JOB TRIGGERS AT 2:00 AM UTC   â”‚
â”‚ APScheduler CronTrigger                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Log: "Starting daily     â”‚
    â”‚    refresh..."              â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. Sync PubMed              â”‚
    â”‚    Query: "diabetes 2024"   â”‚
    â”‚    Query: "hypertension..   â”‚
    â”‚    ...5 topics total        â”‚
    â”‚    Max 10 results each      â”‚
    â”‚    = ~50 papers downloaded  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. For Each Article:        â”‚
    â”‚    â”œâ”€ Quality Gate Check    â”‚
    â”‚    â”‚  âœ“ â‰¥100 chars         â”‚
    â”‚    â”‚  âœ“ â‰¥3 medical terms   â”‚
    â”‚    â”‚  âœ“ Has metadata       â”‚
    â”‚    â”‚                        â”‚
    â”‚    â”œâ”€ Freshness Tagging    â”‚
    â”‚    â”‚  f_score = 0.95+      â”‚
    â”‚    â”‚  status = "current"   â”‚
    â”‚    â”‚                        â”‚
    â”‚    â”œâ”€ FAISS Embedding      â”‚
    â”‚    â”‚  text â†’ 1536-dim vec  â”‚
    â”‚    â”‚                        â”‚
    â”‚    â””â”€ Add to Index         â”‚
    â”‚       index.add(embedding)  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. Refresh Existing Docs    â”‚
    â”‚    For all 20K+ docs:       â”‚
    â”‚    â”œâ”€ Apply freshness()     â”‚
    â”‚    â”‚  based on year         â”‚
    â”‚    â”‚  Update score/status   â”‚
    â”‚    â”‚                        â”‚
    â”‚    â””â”€ Save to FAISS         â”‚
    â”‚       index.save()          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. Check Index Integrity    â”‚
    â”‚    (Runs at 1 AM, but also  â”‚
    â”‚     after fresh index)      â”‚
    â”‚    â”œâ”€ ntotal vectors ==     â”‚
    â”‚    â”‚   doc count?           â”‚
    â”‚    â”œâ”€ All docs have IDs?    â”‚
    â”‚    â””â”€ Auto-rebuild if bad   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 6. Log: "Daily refresh      â”‚
    â”‚    complete. Added X new    â”‚
    â”‚    docs, refreshed all."    â”‚
    â”‚                             â”‚
    â”‚ Example output:             â”‚
    â”‚ Operations: {               â”‚
    â”‚   "pubmed_sync": {...},     â”‚
    â”‚   "index_integrity": {...}, â”‚
    â”‚   "freshness_refresh": {}   â”‚
    â”‚ }                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Freshness Decay Curve Over Time

```
FRESHNESS SCORE vs. PUBLICATION AGE

1.0 â”‚ â–ˆâ–ˆâ–ˆ
    â”‚ â–ˆâ–ˆâ–ˆ    Published this year (2024)
    â”‚ â–ˆâ–ˆâ–ˆ    Recent & fully prioritized
0.95â”‚ â–ˆâ–ˆâ–ˆ    â–² Maximum score
    â”‚ â–ˆâ–ˆâ–ˆ    â”‚
    â”‚ â–ˆâ–ˆâ–ˆ    â”‚
0.90â”‚ â–ˆâ–ˆâ–ˆ    â”‚
    â”‚  â–ˆâ–ˆâ–ˆ   â”‚
    â”‚   â–ˆâ–ˆâ–ˆ  â”œâ”€ Recent (< 2 years)
    â”‚    â–ˆâ–ˆâ–ˆ â”‚  
    â”‚     â–ˆâ–ˆâ–ˆâ”‚  
0.75â”‚      â–ˆâ–ˆâ–ˆ
    â”‚        â–ˆâ–ˆâ–ˆ    Age 2-5 years
    â”‚           â–ˆâ–ˆâ–ˆ Slightly demoted
    â”‚              â–ˆâ–ˆâ–ˆ Still preferred
    â”‚                 â–ˆâ–ˆâ–ˆ
0.50â”‚                    â–ˆâ–ˆâ–ˆ  Age 5-10 years
    â”‚                       â–ˆ  Historical
    â”‚                       â–ˆ  Lower priority
    â”‚                       â–ˆ
0.40â”‚                        â–ˆ
    â”‚                        â–ˆ  Age > 10 years
    â”‚                        â–ˆ  Marked outdated
    â”‚                        â–ˆ  Search deprioritizes
    â”‚                        â–ˆ
0.20â”‚                        â–ˆ
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      2024  2023  2022  2021  2020...2014 2013 2010
      NOW           PAST
      
      FORMULA (Implemented):
      
      age â‰¤ 0:  score = 1.0
      age â‰¤ 2:  score = 0.95 - (age Ã— 0.02)
      age â‰¤ 5:  score = 0.91 - ((age-2) Ã— 0.08)
      age > 5:  score = max(0.2, 0.75 - (age Ã— 0.05))
```

---

## Quality Gate Filtering

```
INCOMING DOCUMENT â†’ QUALITY CHECKS

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Document from PubMed: Article_XYZ      â”‚
â”‚ Text: "Diabetes management guidelines..."â”‚
â”‚ Metadata: PMID=12345, Year=2024        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CHECK 1: Text Length             â”‚
    â”‚ len(text) >= 100?                â”‚
    â”‚ Article = 2,500 chars            â”‚
    â”‚ âœ… PASS (>> 100)                 â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CHECK 2: Medical Entities        â”‚
    â”‚ Count disease/drug/treatment/... â”‚
    â”‚ Article contains:                â”‚
    â”‚  - "diabetes" âœ“                  â”‚
    â”‚  - "glucose" âœ“                   â”‚
    â”‚  - "insulin" âœ“                   â”‚
    â”‚  - "hyperglycemia" âœ“             â”‚
    â”‚ entity_count = 4                 â”‚
    â”‚ >= 3?                            â”‚
    â”‚ âœ… PASS (4 >= 3)                 â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CHECK 3: Metadata Completeness   â”‚
    â”‚ Required fields:                 â”‚
    â”‚  - filename: "pubmed_12345" âœ“   â”‚
    â”‚  - document_id: "pmid_xyz" âœ“    â”‚
    â”‚  - category: "research" âœ“       â”‚
    â”‚ All required?                    â”‚
    â”‚ âœ… PASS (all present)           â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ALL CHECKS PASSED!               â”‚
    â”‚ Document ACCEPTED â†’ Add to KB    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EXAMPLE REJECTION:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Document from Web: Random_Article       â”‚
â”‚ Text: "AI and ML basics"                â”‚
â”‚ Metadata: Incomplete                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CHECK 1: Text Length             â”‚
    â”‚ len(text) = 45 chars             â”‚
    â”‚ >= 100?                          â”‚
    â”‚ âŒ FAIL (45 < 100)              â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    REJECTED: "Text too short"
    Document DISCARDED
```

---

## Weight Evolution: Multi-Feedback Example

```
DOCUMENT: pubmed_12345
"Type 2 Diabetes Management Guidelines 2024"

INITIAL STATE:
weight_file = {
  "doc_id": "pubmed_12345",
  "weight": 1.0,              â† Default
  "feedback_count": 0,
  "created_at": "..."
}

USER #1: Rating â­â­â­â­â­ (5/5)
boost = +0.1
weight = 1.0 + 0.1 = 1.1
feedback_count = 1

USER #2: Rating â­â­â­â­ (4/5)
boost = +0.05
weight = 1.1 + 0.05 = 1.15
feedback_count = 2

USER #3: Rating â­â­ (2/5)
boost = -0.1
weight = 1.15 - 0.1 = 1.05
feedback_count = 3

USER #4: Rating â­â­â­â­â­ (5/5)
boost = +0.1
weight = 1.05 + 0.1 = 1.15
feedback_count = 4

USER #5: Rating â­ (1/5)
boost = -0.2
weight = 1.15 - 0.2 = 0.95
feedback_count = 5

FINAL STATE:
weight_file = {
  "doc_id": "pubmed_12345",
  "weight": 0.95,             â† Mixed feedback
  "feedback_count": 5,        â† 5 users rated it
  "last_feedback": "2024-12-17T14:32:00Z"
}

SUMMARY: Slightly demoted from 1.0 â†’ 0.95 due to mixed feedback
Next search applies 0.95 multiplier to ranking score.
```

---

## System Monitoring Checklist

```
Daily Maintenance Tasks (Automated)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1:00 AM UTC - Index Integrity Check              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Vector count == Doc count?                    â”‚
â”‚ âœ“ All docs have document_id?                    â”‚
â”‚ âœ“ All docs have filename?                       â”‚
â”‚ âœ“ Metadata files intact?                        â”‚
â”‚ â†’ Auto-rebuild if issues detected               â”‚
â”‚ â†’ Log result with [SCHEDULER] tag               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2:00 AM UTC - Daily KB Refresh                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Fetch PubMed: 5 topics Ã— 10 papers            â”‚
â”‚ âœ“ Apply quality gates                           â”‚
â”‚ âœ“ Tag freshness scores                          â”‚
â”‚ âœ“ Add to FAISS index                            â”‚
â”‚ âœ“ Refresh all existing docs with fresh scores   â”‚
â”‚ âœ“ Save index to disk                            â”‚
â”‚ â†’ Log: "[PUBMED-SYNC] X docs added"            â”‚
â”‚ â†’ Log: "[FRESHNESS] Y docs updated"            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Metrics to Monitor

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KB Health Indicators                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Total documents: 20,623 (growing ~50/day)    â”‚
â”‚ â€¢ Total chunks: 150,000+ (searchable units)     â”‚
â”‚ â€¢ Freshness score: avg 0.72 (18% < 5 yr old)   â”‚
â”‚ â€¢ Feedback records: 1,247 (user ratings)        â”‚
â”‚ â€¢ Documents boosted: 342 (5-star feedback)      â”‚
â”‚ â€¢ Documents demoted: 89 (1-star feedback)       â”‚
â”‚ â€¢ Index integrity: OK (last check: 1:00 AM UTC) â”‚
â”‚ â€¢ Last sync: 2:00 AM UTC today                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Alert Thresholds (Auto-triggered if exceeded)

âŒ Index integrity check FAILS
   â†’ Rebuild immediately
   â†’ Send admin alert

âš ï¸  < 500 fresh docs (< 2 years old)
   â†’ Increase PubMed sync frequency
   â†’ Check quality gate settings

âš ï¸  Avg feedback rating < 3.5/5
   â†’ Document KB quality issues
   â†’ Review top-demoted docs

âš ï¸  FAISS search latency > 1s
   â†’ Consider index optimization
   â†’ May need clustering (IVF)
```

---

## API Endpoint Reference

```
FEEDBACK ENDPOINTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST   /api/kb-automation/feedback/answer
       â”œâ”€ Purpose: Submit user rating
       â”œâ”€ Auth: Any authenticated user
       â”œâ”€ Body: {answer_id, query, document_ids, rating, comment}
       â””â”€ Response: {status, feedback_id, message}

GET    /api/kb-automation/feedback/stats
       â”œâ”€ Purpose: View feedback statistics
       â”œâ”€ Auth: Admin only
       â””â”€ Response: {feedback_records, documents_with_feedback, ...}

SYNC ENDPOINTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST   /api/kb-automation/sync/pubmed-manual
       â”œâ”€ Purpose: Trigger PubMed sync now
       â”œâ”€ Auth: Admin only
       â”œâ”€ Body: {queries[], max_results_per_query}
       â””â”€ Response: {status, queries, message}

POST   /api/kb-automation/sync/daily-refresh
       â”œâ”€ Purpose: Run full daily refresh cycle
       â”œâ”€ Auth: Admin only
       â”œâ”€ Body: (empty)
       â””â”€ Response: {status, message}

INTEGRITY ENDPOINTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GET    /api/kb-automation/integrity/check
       â”œâ”€ Purpose: Check KB index health
       â”œâ”€ Auth: Admin only
       â””â”€ Response: {status, issues[], integrity_check_passed}

POST   /api/kb-automation/integrity/rebuild
       â”œâ”€ Purpose: Rebuild index if needed
       â”œâ”€ Auth: Admin only
       â”œâ”€ Body: (empty)
       â””â”€ Response: {status, action, timestamp}

FRESHNESS ENDPOINTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GET    /api/kb-automation/freshness/report
       â”œâ”€ Purpose: View KB age distribution
       â”œâ”€ Auth: Any authenticated user
       â””â”€ Response: {breakdown{current,aging,historical}, recommendations}
```

---

**ğŸ¯ Architecture optimized for medical AI with zero proprietary AI costs.**
